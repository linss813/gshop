# 修复管理员与普通用户登录状态冲突问题

## 问题分析

当前项目中，管理员和普通用户的登录状态使用相同的存储机制，导致两者登录状态冲突：

1. **前端状态管理**：Vuex store中使用统一的状态存储用户和管理员信息
2. **本地存储**：localStorage中使用相同的键名存储两种类型用户的令牌和信息
3. **登录逻辑**：不同类型用户登录时直接覆盖已有状态

## 解决方案

将管理员和普通用户的认证状态分离存储，确保它们能够独立、稳定地保持各自的登录状态。

## 修复步骤

### 1. 修改Vuex状态管理
- 分离用户和管理员的状态存储
- 为两种用户类型创建独立的state、mutations、actions和getters

### 2. 更新localStorage存储键名
- 普通用户：`userToken`、`userInfo`
- 管理员：`adminToken`、`adminInfo`

### 3. 修改登录和登出逻辑
- 登录时根据用户类型存储到对应状态
- 登出时仅清除对应类型用户的状态

### 4. 更新路由守卫和权限检查
- 支持两种类型用户的独立认证检查
- 根据路由需要检查对应类型用户的登录状态

### 5. 更新前端组件中的认证逻辑
- 确保组件根据需要访问正确类型的用户状态

## 预期效果

- 管理员和普通用户可以同时登录，互不影响
- 各自的登录状态独立存储和管理
- 权限控制仍然正常工作
- 支持在同一浏览器或不同浏览器中同时使用两种账号

## 涉及文件

1. **前端状态管理**：`gshop-vue/src/store/index.js`
2. **路由配置**：`gshop-vue/src/router/index.js`
3. **登录组件**：
   - 普通用户：`gshop-vue/src/views/User/Login.vue`
   - 管理员：`gshop-vue/src/views/Admin/Login.vue`
4. **认证混入**：`gshop-vue/src/mixins/auth.js`
5. **可能涉及的其他组件**：使用了认证状态的组件

## 测试验证

修复完成后，需要进行以下测试：

1. 普通用户登录后，管理员登录，验证普通用户状态不被清除
2. 管理员登录后，普通用户登录，验证管理员状态不被清除
3. 两种用户同时登录时，各自的权限控制正常工作
4. 登出一种用户类型，另一种用户类型的状态不受影响
5. 刷新页面后，两种用户类型的状态都能正确恢复